# =============================================================================
# Clipset Go Backend - Environment Configuration
# =============================================================================
# Copy this file to .env and customize for your environment
#
# Docker Usage:
#   Development: docker-compose up -d
#   Production:  docker-compose -f docker-compose.prod.yml up -d
#   With GPU:    docker-compose -f docker-compose.prod.yml -f docker-compose.gpu.yml up -d
# =============================================================================

# -----------------------------------------------------------------------------
# Database (required)
# -----------------------------------------------------------------------------
# For local development:
DATABASE_URL=postgres://clipset:clipset@localhost:5432/clipset?sslmode=disable

# For Docker (uses internal network):
# DATABASE_URL is set automatically in docker-compose.yml

# PostgreSQL credentials (used by docker-compose.prod.yml)
POSTGRES_USER=clipset
POSTGRES_PASSWORD=your-secure-database-password
POSTGRES_DB=clipset

# -----------------------------------------------------------------------------
# Authentication (required)
# -----------------------------------------------------------------------------
# JWT signing secret - MUST be at least 32 characters
# Generate with: openssl rand -base64 32
JWT_SECRET=your-super-secret-jwt-key-that-is-at-least-32-characters-long

# JWT token expiry in hours (default: 720 = 30 days)
JWT_EXPIRY_HOURS=720

# -----------------------------------------------------------------------------
# Initial Admin User (created on first startup)
# -----------------------------------------------------------------------------
INITIAL_ADMIN_EMAIL=admin@example.com
INITIAL_ADMIN_USERNAME=admin
INITIAL_ADMIN_PASSWORD=changeme-in-production

# -----------------------------------------------------------------------------
# Server Settings
# -----------------------------------------------------------------------------
PORT=8000
HOST=0.0.0.0
ENVIRONMENT=development  # development | production

# -----------------------------------------------------------------------------
# Storage Paths
# -----------------------------------------------------------------------------
# For local development (relative to working directory):
VIDEO_STORAGE_PATH=./data/uploads/videos
THUMBNAIL_STORAGE_PATH=./data/uploads/thumbnails
TEMP_STORAGE_PATH=./data/uploads/temp
CHUNKS_STORAGE_PATH=./data/uploads/chunks
CATEGORY_IMAGE_STORAGE_PATH=./data/uploads/category-images
AVATAR_STORAGE_PATH=./data/uploads/avatars

# For Docker (set automatically in docker-compose.yml):
# VIDEO_STORAGE_PATH=/data/uploads/videos
# etc.

# -----------------------------------------------------------------------------
# HLS Streaming (required)
# -----------------------------------------------------------------------------
# HLS signing secret for nginx secure_link - MUST be at least 16 characters
# This secret must match between backend and nginx config
# Generate with: openssl rand -base64 24
HLS_SIGNING_SECRET=your-hls-signing-secret-min-16-chars

# Streaming chunk size in bytes (default: 65536 = 64KB)
# Range: 8192 (8KB) to 1048576 (1MB)
STREAM_CHUNK_SIZE_BYTES=65536

# -----------------------------------------------------------------------------
# Video Processing
# -----------------------------------------------------------------------------
# Path to FFmpeg binary (default: ffmpeg - uses system PATH)
FFMPEG_PATH=ffmpeg

# Path to FFprobe binary (default: ffprobe - uses system PATH)
FFPROBE_PATH=ffprobe

# Video processing timeout (default: 2h)
VIDEO_PROCESSING_TIMEOUT=2h

# -----------------------------------------------------------------------------
# CORS Settings
# -----------------------------------------------------------------------------
# Comma-separated list of allowed origins
# For development:
CORS_ORIGINS=http://localhost:5173,http://localhost:3000,http://localhost:8080

# For production (replace with your domain):
# CORS_ORIGINS=https://your-domain.com

# -----------------------------------------------------------------------------
# Frontend URL (for invitation links)
# -----------------------------------------------------------------------------
FRONTEND_BASE_URL=http://localhost:8080

# For production:
# FRONTEND_BASE_URL=https://your-domain.com
